CMAKE_MINIMUM_REQUIRED(VERSION 3.9)

PROJECT(MyCompilerLib)

INCLUDE(../cmake/compiler.cmake)

FILE(GLOB SOURCE ${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp)
FILE(GLOB HRDS ${CMAKE_CURRENT_SOURCE_DIR}/src/*.hpp)


ADD_LIBRARY(MyCompilerLib SHARED ${SOURCE})
SET_TARGET_PROPERTIES(MyCompilerLib PROPERTIES PUBLIC_HEADER "${HRDS}")

# test
#INCLUDE(test/CMakeLists.txt)

# install lib
INSTALL(TARGETS MyCompilerLib EXPORT ${PROJECT_NAME}Targets
  RUNTIME DESTINATION bin
  LIBRARY DESTINATION lib
  ARCHIVE DESTINATION lib
  PUBLIC_HEADER DESTINATION include/cyy/compiler
  COMPONENT library
  INCLUDES DESTINATION include
  )

# install cmake config file
INSTALL(EXPORT ${PROJECT_NAME}Targets
  FILE ${PROJECT_NAME}Config.cmake
  DESTINATION lib/cmake/${PROJECT_NAME})
